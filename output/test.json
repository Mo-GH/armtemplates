{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "containerName": {
            "defaultValue": "hxe-aci",
            "type": "string"
        },
        "containerURI": {
            "defaultValue": "azstcr1.azurecr.io/store/saplabs/hanaexpress:2.00.030.00.20180403.2",
            "type": "string"
        },
        "imageRegistryLoginServer": {
            "type": "string",
            "defaultValue": "azstcr1.azurecr.io"
        },
        "imageUsername": {
            "type": "string",
            "defaultValue": "azstcr1"
        },
        "imagePassword": {
            "type": "securestring",
            "defaultValue": "Test123$"
        },
        "osType": {
            "defaultValue": "Linux",
            "allowedValues": [
                "Linux",
                "Windows"
            ],
            "type": "string"
        },
        "numberCores": {
            "defaultValue": "4",
            "type": "string"
        },
        "memory": {
            "defaultValue": "14",
            "type": "string"
        },
        "ipType": {
            "defaultValue": "Public",
            "type": "string",
            "allowedValues": [
                "Public",
                "Private"
            ]
        }
    },
    "variables": {
        "apiVersion": {
            "aci": "2018-04-01"
        },
        "aciConfiguration": {
            "containerName": "[parameters('containerName')]",
            "restartPolicy": "OnFailure",
            "osType": "[parameters('osType')]",
            "image": "[parameters('containerURI')]",
            "cpuCores": "[parameters('numberCores')]",
            "memoryInGb": "[parameters('memory')]"
        },
        "networkConfiguration": {
            "ipType": "[parameters('ipType')]",
            "dnsNameLabel": "[parameters('containerName')]",
            "ipProtocol": "TCP"
        },
        "privateImageRegistryCredentials": {
            "server": "[parameters('imageRegistryLoginServer')]",
            "username": "[parameters('imageUsername')]",
            "password": "[parameters('imagePassword')]"
        },
        "volumeConfiguration": {
            "volumeName": "hxe",
            "shareName": "hxe-config",
            "shareMountPath": "/hana/hxeconfig",
            "shareReadOnly": true,
            "shareStorageAccountName": "azcdmdnsaphxe"
        }
    },
    "resources": [
    ],
    "outputs": {
        "aciProperties": {
            "type": "string",
            "value": "[listKeys(resourceId('Microsoft.Storage/storageAccounts/',variables('volumeConfiguration').shareStorageAccountName),'2017-10-01').keys[0].value]"
          }
    }
}
